
# java-nmt-parser

### what's this?

A small parser I wrote for extracting data from a Java Native Memory Tracking summarized report.

### how to use it

Generate a Java NMT report:

```bash
jcmd $JAVA_PID VM.native_memory scale=KB
```

Ensure you have proper dependencies:

```bash
pip install -r requirements.txt
```

Run the script:

```bash
./nmt nmt.sample.log
```

Enjoy:

```json
{
  "arena-chunk.committed": "194KB",
  "arena-chunk.committed.gb": 0,
  "arena-chunk.committed.kb": 194,
  "arena-chunk.committed.mb": 0,
  "arena-chunk.reserved": "194KB",
  "arena-chunk.reserved.gb": 0,
  "arena-chunk.reserved.kb": 194,
  "arena-chunk.reserved.mb": 0,
  "arguments.committed": "24KB",
  "arguments.committed.gb": 0,
  "arguments.committed.kb": 24,
  "arguments.committed.mb": 0,
  "arguments.malloc.allocated": "24KB",
  "arguments.malloc.allocated.gb": 0,
  "arguments.malloc.allocated.kb": 24,
  "arguments.malloc.allocated.mb": 0,
  "arguments.malloc.allocations": 489,
  "arguments.reserved": "24KB",
  "arguments.reserved.gb": 0,
  "arguments.reserved.kb": 24,
  "arguments.reserved.mb": 0,
  "class.class-space.committed": "10240KB",
  "class.class-space.committed.gb": 0,
  "class.class-space.committed.kb": 10240,
  "class.class-space.committed.mb": 10,
  "class.class-space.free": "1596KB",
  "class.class-space.free.gb": 0,
  "class.class-space.free.kb": 1596,
  "class.class-space.free.mb": 1,
  "class.class-space.reserved": "262144KB",
  "class.class-space.reserved.gb": 0,
  "class.class-space.reserved.kb": 262144,
  "class.class-space.reserved.mb": 256,
  "class.class-space.used": "8644KB",
  "class.class-space.used.gb": 0,
  "class.class-space.used.kb": 8644,
  "class.class-space.used.mb": 8,
  "class.class-space.waste": "0KB",
  "class.class-space.waste.gb": 0,
  "class.class-space.waste.kb": 0,
  "class.class-space.waste.mb": 0,
  "class.class-space.waste.percentage": "0.00%",
  "class.classes.arrays": 458,
  "class.classes.instances": 9481,
  "class.classes.total": 9939,
  "class.committed": "76031KB",
  "class.committed.gb": 0,
  "class.committed.kb": 76031,
  "class.committed.mb": 74,
  "class.malloc.allocated": "2859KB",
  "class.malloc.allocated.gb": 0,
  "class.malloc.allocated.kb": 2859,
  "class.malloc.allocated.mb": 2,
  "class.malloc.allocations": 37052,
  "class.metadata.committed": "62932KB",
  "class.metadata.committed.gb": 0,
  "class.metadata.committed.kb": 62932,
  "class.metadata.committed.mb": 61,
  "class.metadata.free": "2481KB",
  "class.metadata.free.gb": 0,
  "class.metadata.free.kb": 2481,
  "class.metadata.free.mb": 2,
  "class.metadata.reserved": "63488KB",
  "class.metadata.reserved.gb": 0,
  "class.metadata.reserved.kb": 63488,
  "class.metadata.reserved.mb": 62,
  "class.metadata.used": "60451KB",
  "class.metadata.used.gb": 0,
  "class.metadata.used.kb": 60451,
  "class.metadata.used.mb": 59,
  "class.metadata.waste": "0KB",
  "class.metadata.waste.gb": 0,
  "class.metadata.waste.kb": 0,
  "class.metadata.waste.mb": 0,
  "class.metadata.waste.percentage": "0.00%",
  "class.mmap.committed": "73172KB",
  "class.mmap.committed.gb": 0,
  "class.mmap.committed.kb": 73172,
  "class.mmap.committed.mb": 71,
  "class.mmap.reserved": "325632KB",
  "class.mmap.reserved.gb": 0,
  "class.mmap.reserved.kb": 325632,
  "class.mmap.reserved.mb": 318,
  "class.reserved": "328491KB",
  "class.reserved.gb": 0,
  "class.reserved.kb": 328491,
  "class.reserved.mb": 320,
  "code.committed": "47928KB",
  "code.committed.gb": 0,
  "code.committed.kb": 47928,
  "code.committed.mb": 46,
  "code.malloc.allocated": "2324KB",
  "code.malloc.allocated.gb": 0,
  "code.malloc.allocated.kb": 2324,
  "code.malloc.allocated.mb": 2,
  "code.malloc.allocations": 11392,
  "code.mmap.committed": "45604KB",
  "code.mmap.committed.gb": 0,
  "code.mmap.committed.kb": 45604,
  "code.mmap.committed.mb": 44,
  "code.mmap.reserved": "247688KB",
  "code.mmap.reserved.gb": 0,
  "code.mmap.reserved.kb": 247688,
  "code.mmap.reserved.mb": 241,
  "code.reserved": "250012KB",
  "code.reserved.gb": 0,
  "code.reserved.kb": 250012,
  "code.reserved.mb": 244,
  "compiler.arena.allocated": "131KB",
  "compiler.arena.allocated.gb": 0,
  "compiler.arena.allocated.kb": 131,
  "compiler.arena.allocated.mb": 0,
  "compiler.arena.allocations": 5,
  "compiler.committed": "7599KB",
  "compiler.committed.gb": 0,
  "compiler.committed.kb": 7599,
  "compiler.committed.mb": 7,
  "compiler.malloc.allocated": "7468KB",
  "compiler.malloc.allocated.gb": 0,
  "compiler.malloc.allocated.kb": 7468,
  "compiler.malloc.allocated.mb": 7,
  "compiler.malloc.allocations": 3343,
  "compiler.reserved": "7599KB",
  "compiler.reserved.gb": 0,
  "compiler.reserved.kb": 7599,
  "compiler.reserved.mb": 7,
  "gc.committed": "85153KB",
  "gc.committed.gb": 0,
  "gc.committed.kb": 85153,
  "gc.committed.mb": 83,
  "gc.malloc.allocated": "14549KB",
  "gc.malloc.allocated.gb": 0,
  "gc.malloc.allocated.kb": 14549,
  "gc.malloc.allocated.mb": 14,
  "gc.malloc.allocations": 35263,
  "gc.mmap.committed": "70604KB",
  "gc.mmap.committed.gb": 0,
  "gc.mmap.committed.kb": 70604,
  "gc.mmap.committed.mb": 68,
  "gc.mmap.reserved": "71820KB",
  "gc.mmap.reserved.gb": 0,
  "gc.mmap.reserved.kb": 71820,
  "gc.mmap.reserved.mb": 70,
  "gc.reserved": "86369KB",
  "gc.reserved.gb": 0,
  "gc.reserved.kb": 86369,
  "gc.reserved.mb": 84,
  "internal.committed": "8707KB",
  "internal.committed.gb": 0,
  "internal.committed.kb": 8707,
  "internal.committed.mb": 8,
  "internal.malloc.allocated": "8667KB",
  "internal.malloc.allocated.gb": 0,
  "internal.malloc.allocated.kb": 8667,
  "internal.malloc.allocated.mb": 8,
  "internal.malloc.allocations": 12096,
  "internal.mmap.committed": "40KB",
  "internal.mmap.committed.gb": 0,
  "internal.mmap.committed.kb": 40,
  "internal.mmap.committed.mb": 0,
  "internal.mmap.reserved": "40KB",
  "internal.mmap.reserved.gb": 0,
  "internal.mmap.reserved.kb": 40,
  "internal.mmap.reserved.mb": 0,
  "internal.reserved": "8707KB",
  "internal.reserved.gb": 0,
  "internal.reserved.kb": 8707,
  "internal.reserved.mb": 8,
  "java-heap.committed": "1015808KB",
  "java-heap.committed.gb": 0,
  "java-heap.committed.kb": 1015808,
  "java-heap.committed.mb": 992,
  "java-heap.mmap.committed": "1015808KB",
  "java-heap.mmap.committed.gb": 0,
  "java-heap.mmap.committed.kb": 1015808,
  "java-heap.mmap.committed.mb": 992,
  "java-heap.mmap.reserved": "1048576KB",
  "java-heap.mmap.reserved.gb": 1,
  "java-heap.mmap.reserved.kb": 1048576,
  "java-heap.mmap.reserved.mb": 1024,
  "java-heap.reserved": "1048576KB",
  "java-heap.reserved.gb": 1,
  "java-heap.reserved.kb": 1048576,
  "java-heap.reserved.mb": 1024,
  "logging.committed": "4KB",
  "logging.committed.gb": 0,
  "logging.committed.kb": 4,
  "logging.committed.mb": 0,
  "logging.malloc.allocated": "4KB",
  "logging.malloc.allocated.gb": 0,
  "logging.malloc.allocated.kb": 4,
  "logging.malloc.allocated.mb": 0,
  "logging.malloc.allocations": 186,
  "logging.reserved": "4KB",
  "logging.reserved.gb": 0,
  "logging.reserved.kb": 4,
  "logging.reserved.mb": 0,
  "module.committed": "99KB",
  "module.committed.gb": 0,
  "module.committed.kb": 99,
  "module.committed.mb": 0,
  "module.malloc.allocated": "99KB",
  "module.malloc.allocated.gb": 0,
  "module.malloc.allocated.kb": 99,
  "module.malloc.allocated.mb": 0,
  "module.malloc.allocations": 1327,
  "module.reserved": "99KB",
  "module.reserved.gb": 0,
  "module.reserved.kb": 99,
  "module.reserved.mb": 0,
  "native-memory-tracking.committed": "3897KB",
  "native-memory-tracking.committed.gb": 0,
  "native-memory-tracking.committed.kb": 3897,
  "native-memory-tracking.committed.mb": 3,
  "native-memory-tracking.malloc.allocated": "127KB",
  "native-memory-tracking.malloc.allocated.gb": 0,
  "native-memory-tracking.malloc.allocated.kb": 127,
  "native-memory-tracking.malloc.allocated.mb": 0,
  "native-memory-tracking.malloc.allocations": 1740,
  "native-memory-tracking.reserved": "3897KB",
  "native-memory-tracking.reserved.gb": 0,
  "native-memory-tracking.reserved.kb": 3897,
  "native-memory-tracking.reserved.mb": 3,
  "other.committed": "455986KB",
  "other.committed.gb": 0,
  "other.committed.kb": 455986,
  "other.committed.mb": 445,
  "other.malloc.allocated": "455986KB",
  "other.malloc.allocated.gb": 0,
  "other.malloc.allocated.kb": 455986,
  "other.malloc.allocated.mb": 445,
  "other.malloc.allocations": 1596,
  "other.reserved": "455986KB",
  "other.reserved.gb": 0,
  "other.reserved.kb": 455986,
  "other.reserved.mb": 445,
  "symbol.arena.allocated": "2821KB",
  "symbol.arena.allocated.gb": 0,
  "symbol.arena.allocated.kb": 2821,
  "symbol.arena.allocated.mb": 2,
  "symbol.arena.allocations": 1,
  "symbol.committed": "17539KB",
  "symbol.committed.gb": 0,
  "symbol.committed.kb": 17539,
  "symbol.committed.mb": 17,
  "symbol.malloc.allocated": "14718KB",
  "symbol.malloc.allocated.gb": 0,
  "symbol.malloc.allocated.kb": 14718,
  "symbol.malloc.allocated.mb": 14,
  "symbol.malloc.allocations": 132769,
  "symbol.reserved": "17539KB",
  "symbol.reserved.gb": 0,
  "symbol.reserved.kb": 17539,
  "symbol.reserved.mb": 17,
  "thread.arena.allocated": "648KB",
  "thread.arena.allocated.gb": 0,
  "thread.arena.allocated.kb": 648,
  "thread.arena.allocated.mb": 0,
  "thread.arena.allocations": 1103,
  "thread.committed": "67329KB",
  "thread.committed.gb": 0,
  "thread.committed.kb": 67329,
  "thread.committed.mb": 65,
  "thread.malloc.allocated": "1985KB",
  "thread.malloc.allocated.gb": 0,
  "thread.malloc.allocated.kb": 1985,
  "thread.malloc.allocated.mb": 1,
  "thread.malloc.allocations": 2770,
  "thread.reserved": "153801KB",
  "thread.reserved.gb": 0,
  "thread.reserved.kb": 153801,
  "thread.reserved.mb": 150,
  "thread.stack.committed": "64696KB",
  "thread.stack.committed.gb": 0,
  "thread.stack.committed.kb": 64696,
  "thread.stack.committed.mb": 63,
  "thread.stack.reserved": "151168KB",
  "thread.stack.reserved.gb": 0,
  "thread.stack.reserved.kb": 151168,
  "thread.stack.reserved.mb": 147,
  "thread.threads.total": 552,
  "total.committed": "1786298KB",
  "total.committed.gb": 1,
  "total.committed.kb": 1786298,
  "total.committed.mb": 1744,
  "total.reserved": "2361298KB",
  "total.reserved.gb": 2,
  "total.reserved.kb": 2361298,
  "total.reserved.mb": 2305
}
```
